/**
 * QUnit - A JavaScript Unit Testing Framework
 *
 * http://docs.jquery.com/QUnit
 *
 * Copyright (c) 2012 John Resig, Jörn Zaefferer
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * or GPL (GPL-LICENSE.txt) licenses.
 */
!function(t){function e(){w.autorun=!0,w.currentModule&&b.moduleDone({name:w.currentModule,failed:w.moduleStats.bad,passed:w.moduleStats.all-w.moduleStats.bad,total:w.moduleStats.all});var t=p("qunit-banner"),e=p("qunit-tests"),n=+new Date-w.started,i=w.stats.all-w.stats.bad,o=["Tests completed in ",n," milliseconds.<br/>",'<span class="passed">',i,'</span> tests of <span class="total">',w.stats.all,'</span> passed, <span class="failed">',w.stats.bad,"</span> failed."].join("");t&&(t.className=w.stats.bad?"qunit-fail":"qunit-pass"),e&&(p("qunit-testresult").innerHTML=o),w.altertitle&&"undefined"!=typeof document&&document.title&&(document.title=[w.stats.bad?"✖":"✔",document.title.replace(/^[\u2714\u2716] /i,"")].join(" ")),b.done({failed:w.stats.bad,passed:i,total:w.stats.all,runtime:n})}function n(t){var e=w.filter,n=!1;if(!e)return!0;var i="!"===e.charAt(0);return i&&(e=e.slice(1)),-1!==t.indexOf(e)?!i:(i&&(n=!0),n)}function i(){try{throw new Error}catch(t){if(t.stacktrace)return t.stacktrace.split("\n")[6];if(t.stack)return t.stack.split("\n")[4];t.sourceURL}}function o(t){return t?(t+="",t.replace(/[\&"<>\\]/g,function(t){switch(t){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return t}})):""}function r(t){w.queue.push(t),w.autorun&&!w.blocking&&s()}function s(){for(var n=(new Date).getTime();w.queue.length&&!w.blocking;){if(!(w.updateRate<=0||(new Date).getTime()-n<w.updateRate)){t.setTimeout(s,13);break}w.queue.shift()()}w.blocking||w.queue.length||e()}function a(){if(w.pollution=[],w.noglobals)for(var e in t)w.pollution.push(e)}function l(){var t=w.pollution;a();var e=u(w.pollution,t);e.length>0&&ok(!1,"Introduced global variable(s): "+e.join(", "));var n=u(t,w.pollution);n.length>0&&ok(!1,"Deleted global variable(s): "+n.join(", "))}function u(t,e){for(var n=t.slice(),i=0;i<n.length;i++)for(var o=0;o<e.length;o++)if(n[i]===e[o]){n.splice(i,1),i--;break}return n}function c(e,n,i){"undefined"!=typeof console&&console.error&&console.warn?(console.error(e),console.error(n),console.warn(i.toString())):t.opera&&opera.postError&&opera.postError(e,n,i.toString)}function d(t,e){for(var n in e)void 0===e[n]?delete t[n]:t[n]=e[n];return t}function h(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):n()}function p(t){return!("undefined"==typeof document||!document||!document.getElementById)&&document.getElementById(t)}function f(t){for(var e,n="",i=0;t[i];i++)e=t[i],3===e.nodeType||4===e.nodeType?n+=e.nodeValue:8!==e.nodeType&&(n+=f(e.childNodes));return n}function m(t,e){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}var g={setTimeout:"undefined"!=typeof t.setTimeout,sessionStorage:function(){try{return!!sessionStorage.getItem}catch(t){return!1}}()},v=0,y=function(t,e,n,i,o,r){this.name=t,this.testName=e,this.expected=n,this.testEnvironmentArg=i,this.async=o,this.callback=r,this.assertions=[]};y.prototype={init:function(){var t=p("qunit-tests");if(t){var e=document.createElement("strong");e.innerHTML="Running "+this.name;var n=document.createElement("li");n.appendChild(e),n.className="running",n.id=this.id="test-output"+v++,t.appendChild(n)}},setup:function(){this.module!=w.previousModule&&(w.previousModule&&b.moduleDone({name:w.previousModule,failed:w.moduleStats.bad,passed:w.moduleStats.all-w.moduleStats.bad,total:w.moduleStats.all}),w.previousModule=this.module,w.moduleStats={all:0,bad:0},b.moduleStart({name:this.module})),w.current=this,this.testEnvironment=d({setup:function(){},teardown:function(){}},this.moduleTestEnvironment),this.testEnvironmentArg&&d(this.testEnvironment,this.testEnvironmentArg),b.testStart({name:this.testName}),b.current_testEnvironment=this.testEnvironment;try{w.pollution||a(),this.testEnvironment.setup.call(this.testEnvironment)}catch(t){b.ok(!1,"Setup failed on "+this.testName+": "+t.message)}},run:function(){if(this.async&&b.stop(),w.notrycatch)return this.callback.call(this.testEnvironment),void 0;try{this.callback.call(this.testEnvironment)}catch(t){c("Test "+this.testName+" died, exception and test follows",t,this.callback),b.ok(!1,"Died on test #"+(this.assertions.length+1)+": "+t.message+" - "+b.jsDump.parse(t)),a(),w.blocking&&start()}},teardown:function(){try{this.testEnvironment.teardown.call(this.testEnvironment),l()}catch(t){b.ok(!1,"Teardown failed on "+this.testName+": "+t.message)}},finish:function(){this.expected&&this.expected!=this.assertions.length&&b.ok(!1,"Expected "+this.expected+" assertions, but "+this.assertions.length+" were run");var e=0,n=0,i=p("qunit-tests");if(w.stats.all+=this.assertions.length,w.moduleStats.all+=this.assertions.length,i){for(var o=document.createElement("ol"),r=0;r<this.assertions.length;r++){var s=this.assertions[r],a=document.createElement("li");a.className=s.result?"pass":"fail",a.innerHTML=s.message||(s.result?"okay":"failed"),o.appendChild(a),s.result?e++:(n++,w.stats.bad++,w.moduleStats.bad++)}b.config.reorder&&g.sessionStorage&&(n?sessionStorage.setItem("qunit-"+this.module+"-"+this.testName,n):sessionStorage.removeItem("qunit-"+this.module+"-"+this.testName)),0==n&&(o.style.display="none");var l=document.createElement("strong");l.innerHTML=this.name+" <b class='counts'>(<b class='failed'>"+n+"</b>, <b class='passed'>"+e+"</b>, "+this.assertions.length+")</b>";var u=document.createElement("a");u.innerHTML="Rerun",u.href=b.url({filter:f([l]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")}),h(l,"click",function(){var t=l.nextSibling.nextSibling,e=t.style.display;t.style.display="none"===e?"block":"none"}),h(l,"dblclick",function(e){var n=e&&e.target?e.target:t.event.srcElement;("span"==n.nodeName.toLowerCase()||"b"==n.nodeName.toLowerCase())&&(n=n.parentNode),t.location&&"strong"===n.nodeName.toLowerCase()&&(t.location=b.url({filter:f([n]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")}))});var a=p(this.id);a.className=n?"fail":"pass",a.removeChild(a.firstChild),a.appendChild(l),a.appendChild(u),a.appendChild(o)}else for(var r=0;r<this.assertions.length;r++)this.assertions[r].result||(n++,w.stats.bad++,w.moduleStats.bad++);try{b.reset()}catch(d){c("reset() failed, following Test "+this.testName+", exception and reset fn follows",d,b.reset)}b.testDone({name:this.testName,failed:n,passed:this.assertions.length-n,total:this.assertions.length})},queue:function(){function t(){r(function(){e.setup()}),r(function(){e.run()}),r(function(){e.teardown()}),r(function(){e.finish()})}var e=this;r(function(){e.init()});var n=b.config.reorder&&g.sessionStorage&&+sessionStorage.getItem("qunit-"+this.module+"-"+this.testName);n?t():r(t)}};var b={module:function(t,e){w.currentModule=t,w.currentModuleTestEnviroment=e},asyncTest:function(t,e,n){2===arguments.length&&(n=e,e=0),b.test(t,e,n,!0)},test:function(t,e,i,o){var r,s='<span class="test-name">'+t+"</span>";if(2===arguments.length&&(i=e,e=null),e&&"object"==typeof e&&(r=e,e=null),w.currentModule&&(s='<span class="module-name">'+w.currentModule+"</span>: "+s),n(w.currentModule+": "+t)){var a=new y(s,t,e,r,o,i);a.module=w.currentModule,a.moduleTestEnvironment=w.currentModuleTestEnviroment,a.queue()}},expect:function(t){w.current.expected=t},ok:function(t,e){t=!!t;var n={result:t,message:e};e=o(e),b.log(n),w.current.assertions.push({result:t,message:e})},equal:function(t,e,n){b.push(e==t,t,e,n)},notEqual:function(t,e,n){b.push(e!=t,t,e,n)},deepEqual:function(t,e,n){b.push(b.equiv(t,e),t,e,n)},notDeepEqual:function(t,e,n){b.push(!b.equiv(t,e),t,e,n)},strictEqual:function(t,e,n){b.push(e===t,t,e,n)},notStrictEqual:function(t,e,n){b.push(e!==t,t,e,n)},raises:function(t,e,n){var i,o=!1;"string"==typeof e&&(n=e,e=null);try{t()}catch(r){i=r}i&&(e?"regexp"===b.objectType(e)?o=e.test(i):i instanceof e?o=!0:e.call({},i)===!0&&(o=!0):o=!0),b.ok(o,n)},start:function(){w.semaphore--,w.semaphore>0||(w.semaphore<0&&(w.semaphore=0),g.setTimeout?t.setTimeout(function(){w.semaphore>0||(w.timeout&&clearTimeout(w.timeout),w.blocking=!1,s())},13):(w.blocking=!1,s()))},stop:function(e){w.semaphore++,w.blocking=!0,e&&g.setTimeout&&(clearTimeout(w.timeout),w.timeout=t.setTimeout(function(){b.ok(!1,"Test timed out"),b.start()},e))}};b.equals=b.equal,b.same=b.deepEqual;var w={queue:[],blocking:!0,hidepassed:!1,reorder:!0,altertitle:!0,urlConfig:["noglobals","notrycatch"]};!function(){var e,n=t.location||{search:"",protocol:"file:"},i=n.search.slice(1).split("&"),o=i.length,r={};if(i[0])for(var s=0;o>s;s++)e=i[s].split("="),e[0]=decodeURIComponent(e[0]),e[1]=e[1]?decodeURIComponent(e[1]):!0,r[e[0]]=e[1];b.urlParams=r,w.filter=r.filter,b.isLocal=!("file:"!==n.protocol)}(),"undefined"==typeof exports||"undefined"==typeof require?(d(t,b),t.QUnit=b):(d(exports,b),exports.QUnit=b),d(b,{config:w,init:function(){d(w,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1e3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:0});var t=p("qunit-tests"),e=p("qunit-banner"),n=p("qunit-testresult");t&&(t.innerHTML=""),e&&(e.className=""),n&&n.parentNode.removeChild(n),t&&(n=document.createElement("p"),n.id="qunit-testresult",n.className="result",t.parentNode.insertBefore(n,t),n.innerHTML="Running...<br/>&nbsp;")},reset:function(){if(t.jQuery)jQuery("#qunit-fixture").html(w.fixture);else{var e=p("qunit-fixture");e&&(e.innerHTML=w.fixture)}},triggerEvent:function(t,e,n){document.createEvent?(n=document.createEvent("MouseEvents"),n.initMouseEvent(e,!0,!0,t.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)):t.fireEvent&&t.fireEvent("on"+e)},is:function(t,e){return b.objectType(e)==t},objectType:function(t){if("undefined"==typeof t)return"undefined";if(null===t)return"null";var e=Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]||"";switch(e){case"Number":return isNaN(t)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return e.toLowerCase()}return"object"==typeof t?"object":void 0},push:function(t,e,n,r){var s={result:t,message:r,actual:e,expected:n};r=o(r)||(t?"okay":"failed"),r='<span class="test-message">'+r+"</span>",n=o(b.jsDump.parse(n)),e=o(b.jsDump.parse(e));var a=r+'<table><tr class="test-expected"><th>Expected: </th><td><pre>'+n+"</pre></td></tr>";if(e!=n&&(a+='<tr class="test-actual"><th>Result: </th><td><pre>'+e+"</pre></td></tr>",a+='<tr class="test-diff"><th>Diff: </th><td><pre>'+b.diff(n,e)+"</pre></td></tr>"),!t){var l=i();l&&(s.source=l,a+='<tr class="test-source"><th>Source: </th><td><pre>'+o(l)+"</pre></td></tr>")}a+="</table>",b.log(s),w.current.assertions.push({result:!!t,message:a})},url:function(e){e=d(d({},b.urlParams),e);var n,i="?";for(n in e)i+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t.location.pathname+i.slice(0,-1)},extend:d,id:p,addEvent:h,begin:function(){},done:function(){},log:function(){},testStart:function(){},testDone:function(){},moduleStart:function(){},moduleDone:function(){}}),("undefined"==typeof document||"complete"===document.readyState)&&(w.autorun=!0),b.load=function(){b.begin({});var e=d({},w);b.init(),d(w,e),w.blocking=!1;for(var n,i="",o=(w.urlConfig.length,0);n=w.urlConfig[o];o++)w[n]=b.urlParams[n],i+='<label><input name="'+n+'" type="checkbox"'+(w[n]?' checked="checked"':"")+">"+n+"</label>";var r=p("qunit-userAgent");r&&(r.innerHTML=navigator.userAgent);var s=p("qunit-header");s&&(s.innerHTML='<a href="'+b.url({filter:void 0})+'"> '+s.innerHTML+"</a> "+i,h(s,"change",function(e){var n={};n[e.target.name]=e.target.checked?!0:void 0,t.location=b.url(n)}));var a=p("qunit-testrunner-toolbar");if(a){var l=document.createElement("input");if(l.type="checkbox",l.id="qunit-filter-pass",h(l,"click",function(){var t=document.getElementById("qunit-tests");if(l.checked)t.className=t.className+" hidepass";else{var e=" "+t.className.replace(/[\n\t\r]/g," ")+" ";t.className=e.replace(/ hidepass /," ")}g.sessionStorage&&(l.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))}),w.hidepassed||g.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests")){l.checked=!0;var u=document.getElementById("qunit-tests");u.className=u.className+" hidepass"}a.appendChild(l);var c=document.createElement("label");c.setAttribute("for","qunit-filter-pass"),c.innerHTML="Hide passed tests",a.appendChild(c)}var f=p("qunit-fixture");f&&(w.fixture=f.innerHTML),w.autostart&&b.start()},h(t,"load",b.load),b.equiv=function(){function t(t,e,n){var i=b.objectType(t);return i?"function"===b.objectType(e[i])?e[i].apply(e,n):e[i]:void 0}var e,n=[],i=[],o=function(){function t(t,e){return t instanceof e.constructor||e instanceof t.constructor?e==t:e===t}return{string:t,"boolean":t,number:t,"null":t,undefined:t,nan:function(t){return isNaN(t)},date:function(t,e){return"date"===b.objectType(t)&&e.valueOf()===t.valueOf()},regexp:function(t,e){return"regexp"===b.objectType(t)&&e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline},"function":function(){var t=n[n.length-1];return t!==Object&&"undefined"!=typeof t},array:function(t,n){var o,r,s,a;if("array"!==b.objectType(t))return!1;if(a=n.length,a!==t.length)return!1;for(i.push(n),o=0;a>o;o++){for(s=!1,r=0;r<i.length;r++)i[r]===n[o]&&(s=!0);if(!s&&!e(n[o],t[o]))return i.pop(),!1}return i.pop(),!0},object:function(t,o){var r,s,a,l=!0,u=[],c=[];if(o.constructor!==t.constructor)return!1;n.push(o.constructor),i.push(o);for(r in o){for(a=!1,s=0;s<i.length;s++)i[s]===o[r]&&(a=!0);if(u.push(r),!a&&!e(o[r],t[r])){l=!1;break}}n.pop(),i.pop();for(r in t)c.push(r);return l&&e(u.sort(),c.sort())}}}();return e=function(){var e=Array.prototype.slice.apply(arguments);return e.length<2?!0:function(e,n){return e===n?!0:null===e||null===n||"undefined"==typeof e||"undefined"==typeof n||b.objectType(e)!==b.objectType(n)?!1:t(e,o,[n,e])}(e[0],e[1])&&arguments.callee.apply(this,e.splice(1,e.length-1))}}(),/**
 * jsDump Copyright (c) 2008 Ariel Flesler - aflesler(at)gmail(dot)com |
 * http://flesler.blogspot.com Licensed under BSD
 * (http://www.opensource.org/licenses/bsd-license.php) Date: 5/15/2008
 *
 * @projectDescription Advanced and extensible data dumping for Javascript.
 * @version 1.0.0
 * @author Ariel Flesler
 * @link {http://flesler.blogspot.com/2008/05/jsdump-pretty-dump-of-any-javascript.html}
 */
b.jsDump=function(){function t(t){return'"'+t.toString().replace(/"/g,'\\"')+'"'}function e(t){return t+""}function n(t,e,n){var i=r.separator(),o=r.indent(),s=r.indent(1);return e.join&&(e=e.join(","+i+s)),e?[t,s+e,o+n].join(i):t+n}function i(t,e){var i=t.length,o=Array(i);for(this.up();i--;)o[i]=this.parse(t[i],void 0,e);return this.down(),n("[",o,"]")}var o=/^function (\w+)/,r={parse:function(t,e,n){n=n||[];var i=this.parsers[e||this.typeOf(t)];e=typeof i;var o=m(t,n);if(-1!=o)return"recursion("+(o-n.length)+")";if("function"==e){n.push(t);var r=i.call(this,t,n);return n.pop(),r}return"string"==e?i:this.parsers.error},typeOf:function(t){var e;return e=null===t?"null":"undefined"==typeof t?"undefined":b.is("RegExp",t)?"regexp":b.is("Date",t)?"date":b.is("Function",t)?"function":void 0!==typeof t.setInterval&&"undefined"!=typeof t.document&&"undefined"==typeof t.nodeType?"window":9===t.nodeType?"document":t.nodeType?"node":"object"==typeof t&&"number"==typeof t.length&&t.length>=0?"array":typeof t},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(t){if(!this.multiline)return"";var e=this.indentChar;return this.HTML&&(e=e.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")),Array(this._depth_+(t||0)).join(e)},up:function(t){this._depth_+=t||1},down:function(t){this._depth_-=t||1},setParser:function(t,e){this.parsers[t]=e},quote:t,literal:e,join:n,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(t){var e="function",i="name"in t?t.name:(o.exec(t)||[])[1];return i&&(e+=" "+i),e+="(",e=[e,b.jsDump.parse(t,"functionArgs"),"){"].join(""),n(e,b.jsDump.parse(t,"functionCode"),"}")},array:i,nodelist:i,arguments:i,object:function(t,e){var i=[];b.jsDump.up();for(var o in t){var r=t[o];i.push(b.jsDump.parse(o,"key")+": "+b.jsDump.parse(r,void 0,e))}return b.jsDump.down(),n("{",i,"}")},node:function(t){var e=b.jsDump.HTML?"&lt;":"<",n=b.jsDump.HTML?"&gt;":">",i=t.nodeName.toLowerCase(),o=e+i;for(var r in b.jsDump.DOMAttrs){var s=t[b.jsDump.DOMAttrs[r]];s&&(o+=" "+r+"="+b.jsDump.parse(s,"attribute"))}return o+n+e+"/"+i+n},functionArgs:function(t){var e=t.length;if(!e)return"";for(var n=Array(e);e--;)n[e]=String.fromCharCode(97+e);return" "+n.join(", ")+" "},key:t,functionCode:"[code]",attribute:t,string:t,date:t,regexp:e,number:e,"boolean":e},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"  ",multiline:!0};return r}(),b.diff=function(){function t(t,e){for(var n={},i={},o=0;o<e.length;o++)null==n[e[o]]&&(n[e[o]]={rows:[],o:null}),n[e[o]].rows.push(o);for(var o=0;o<t.length;o++)null==i[t[o]]&&(i[t[o]]={rows:[],n:null}),i[t[o]].rows.push(o);for(var o in n)1==n[o].rows.length&&"undefined"!=typeof i[o]&&1==i[o].rows.length&&(e[n[o].rows[0]]={text:e[n[o].rows[0]],row:i[o].rows[0]},t[i[o].rows[0]]={text:t[i[o].rows[0]],row:n[o].rows[0]});for(var o=0;o<e.length-1;o++)null!=e[o].text&&null==e[o+1].text&&e[o].row+1<t.length&&null==t[e[o].row+1].text&&e[o+1]==t[e[o].row+1]&&(e[o+1]={text:e[o+1],row:e[o].row+1},t[e[o].row+1]={text:t[e[o].row+1],row:o+1});for(var o=e.length-1;o>0;o--)null!=e[o].text&&null==e[o-1].text&&e[o].row>0&&null==t[e[o].row-1].text&&e[o-1]==t[e[o].row-1]&&(e[o-1]={text:e[o-1],row:e[o].row-1},t[e[o].row-1]={text:t[e[o].row-1],row:o-1});return{o:t,n:e}}return function(e,n){e=e.replace(/\s+$/,""),n=n.replace(/\s+$/,"");var i=t(""==e?[]:e.split(/\s+/),""==n?[]:n.split(/\s+/)),o="",r=e.match(/\s+/g);null==r?r=[" "]:r.push(" ");var s=n.match(/\s+/g);if(null==s?s=[" "]:s.push(" "),0==i.n.length)for(var a=0;a<i.o.length;a++)o+="<del>"+i.o[a]+r[a]+"</del>";else{if(null==i.n[0].text)for(n=0;n<i.o.length&&null==i.o[n].text;n++)o+="<del>"+i.o[n]+r[n]+"</del>";for(var a=0;a<i.n.length;a++)if(null==i.n[a].text)o+="<ins>"+i.n[a]+s[a]+"</ins>";else{var l="";for(n=i.n[a].row+1;n<i.o.length&&null==i.o[n].text;n++)l+="<del>"+i.o[n]+r[n]+"</del>";o+=" "+i.n[a].text+s[a]+l}}return o}}()}(this);