
  <%= render "layouts/sidebar" %>

  <div class="col-lg-10">

	<% if (current_user.has_role? :owner) || (current_user.has_role? :professional) %>

	<h3><%= @event.title %></h3>
    <p class="pull-right" style="margin-top:-30px;"><%= link_to 'Back', :back %> |
    <% if @professional.present? %>

    <% else %>
     <%= link_to 'Edit', edit_studio_event_path(@studio, @event),  :data => {:toggle => "modal", :target => "#editModal#{@event.id}"}, :remote => true %>  |	
     <%= link_to 'Delete', [@studio, @event], method: :delete, data: { confirm: 'Are you sure? This action cannot be undone.' } %></p>
     <%= render :partial => 'show_edit', :locals => {:event => @event}%>
     	    <div class="col-lg-12">
	<%= link_to 'CheckIn Page', checkin_event_path(@studio, @event),
        :class => 'btn btn-primary pull-right', :style => "margin-top:-38px;margin-right:-150px;"%></div>
     <% end %>

   	<div class="divider-horizontal-regular"></div>

	<div class="row" style="margin-left:20px;margin-top:20px;">

    <div class="col-lg-4">
	<p><b>Taught by:</b> <%= @event.instructor %><p>
	<p><b>Date:</b>  <%= @event.date %><p>
	<p><b>Time:</b>  <%= @event.start_time %> - <%= @event.end_time %><p>
	<p><b>Website:</b> 	<i> enter to link to from calendar </i><p>
	</div>
	<div class="col-lg-7">
	<% if @event.description.present?%>	
	<p><b>Description</b></p>
	<p><%= @event.description %></p>
	<% end %>
	</div>
	</div>

	<div class="col-lg-12">
		<div class="divider-horizontal-regular"></div>
		<p class="lead"> Registration List </p>
		<p class="pull-right" style="margin-top:-45px;">
			<a style = "margin-top:5px;" href="#registerModal" id="#registerModal" data-toggle="modal">+ add new</a>
		<% if @registered.present? %>
		<div class="divider-horizontal-regular"></div>
		<table class="table table-hover">
		<thead>
			<tr>
				<th>Name</th>
				<th> </th>      
				<th> </th>                    
			</tr>
		</thead>
		<tbody>
			<% @registered.each do |registered| %>
			<% if registered.has_role? :canceled, @event %>
			<tr class="danger"><%else %><tr>
			<%end %>
			<td><%= registered.name %></td>
        	<td><%= link_to 'CheckIn', 
        	add_attendance_studio_event_user_path(@studio, @event, registered), :method=> :get, :class=>'btn btn-default btn-mini pull-right' %>			
        		<% if !registered.has_role? :canceled, @event %>
				<%= link_to 'Cancel', 
        	cancel_registration_studio_event_user_path(@studio, @event, registered), :class=>'btn btn-default btn-mini pull-right' %>
        		<%end %></td>
        	<td><%= link_to 'x', remove_registration_studio_event_user_path(@studio, @event, registered), :class=>"close", :type => 'button', :style=>"margin-top:-5px;"%></td>
        	</tr>
        	<% end %>
		</tbody>
	</table>
		<% end %>


		<div class="divider-horizontal-regular"></div>
				<p class="lead"> Attendees </p>
		<% @attendees = Profile.with_role(:attended, @event) %>
		<% if @attendees.present? %>
		<div class="divider-horizontal-regular"></div>

		<table class="table table-hover">
		<thead>
			<tr>
				<th>Name</th>
				<th>Credits Left</th>
				<th></th>                          
			</tr>
		</thead>
		<tbody>
		<% @attendees.each do |attendee| %>
		<% if attendee.user.present? %>	
		<% end %>	
			<tr>
				<td><%= attendee.name %></td> 
				<td>unlimited</td> 
				<td></td> 
			</tr>
			<% end %>
		</tbody>
	</table>

		<% end %>
		<% end %>
</div>
</div>


 <div class="modal" id="registerModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Register Basic Account</h4>
      </div>
      <%= render "add_registration" %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

 <div class="modal" id="check-in" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Thanks for signing in!</h4>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
