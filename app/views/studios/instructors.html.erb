<script>
$(document).ready(function() {
document.getElementById("profile_state").classList.add('form-control');
    $("#create_profile_area").hide();

    var phone = document.getElementById('profile_phone').value.toString();
    if (phone != "" && phone != "0"){ 
    number = "(" +phone.charAt(0)+phone.charAt(1)+phone.charAt(2)+ ") " 
        +phone.charAt(3)+phone.charAt(4)+phone.charAt(5)+ "-" 
        +phone.charAt(6)+phone.charAt(7)+phone.charAt(8)+phone.charAt(9)
    document.getElementById('profile_phone').value = number;
    }

    var num = document.getElementById('profile_emergency_contact_number').value.toString();
    if (num != "" && num != "0"){ 
    number = "(" +num.charAt(0)+num.charAt(1)+num.charAt(2)+ ") " 
        +num.charAt(3)+num.charAt(4)+num.charAt(5)+ "-" 
        +num.charAt(6)+num.charAt(7)+num.charAt(8)+num.charAt(9)
    document.getElementById('profile_emergency_contact_number').value = number;
    }
    $('.form_datetime').datetimepicker({
        weekStart: 1,
        todayBtn:  0,
        autoclose: 1,
        todayHighlight: 0,
        minView: 2,
        startView: 4,
        forceParse: 0,
        showMeridian: 1
    });

$('#toggle_form').on('click', function () {
    $("#search_profile_area").hide();
        $("#create_profile_area").show();

});

$('#toggle_search').on('click', function () {
    $("#search_profile_area").show();
        $("#create_profile_area").hide();

});

});
</script>

  <%= render "layouts/sidebar" %>

		<div class="col-lg-9" >
			<h3> Studio Instructors </h3> 
			<p style="margin-top:-32px;margin-left:225px;">
			<%= link_to '+ add new', new_studio_membership_path(@studio),  
				:data => {:toggle => "modal", :target => "#addInstructor"} , :remote => true, :html => {:style => "margin-top:5px;"}%></p>

		<div class="col-lg-7" style="margin-left:650px;margin-top:-40px;" >
			<%= form_for @search, :url => instructors_studio_path(@studio), :html => {:method => :get, :id => "user_search"} do |f| %>
				<div class="input-group">
		      	<%= f.text_field :name_or_email_contains, :class => "form-control"  %>
		      	<span class="input-group-btn">
		          <button type="submit" class="btn btn-primary">Search</button>
		      	</span>
		    	</div><!-- /input-group -->
			<% end %>
		</div>
		</div>

		<table class="table table-hover">
		    <thead>
		        <tr>
		          <th></th>
		          <th>Name</th>
		          <th>Email</th>  
		          <th>Phone</th>
		          <th>City</th>                             
		          <th>Certification</th>  
		          <th>Availability? </th>                           
		        </tr>
		    </thead>
		    <tbody>
		        <% @instructors.each do |user| %>
		        	<tr>
		        		<td><%= image_tag user.photo.image.url(:thumb) if user.photo %></td>
		        		<td><%=link_to user.name %></td>
		        		<td><%=link_to user.email %></td>
		        		<td><%=  user.phone if user.phone %></td>
		        		<td><%= user.city %>, <%= user.state %></td>
		        		<td></td>
		        		<td></td>
                  		<td><a class = 'btn btn-default btn-xs' href="mailto:<%=user.email%>">Message</a></td>
		        	</tr>
		        <% end %>
		    </tbody>
		</table>
    <div class="divider-horizontal-regular"></div>


		<div style="margin-top:0px; margin-left:auto; margin-right:auto; width:231px;">
		<%= link_to 'Search Database', instructors_database_path(), class: 'btn btn-primary btn-large', :style => "width:260px;margin-top:50px;" %>
		</div>

  <div class="modal" id="addInstructor" tabindex="-1" role="dialog" aria-labelledby="addInstructorLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Add Instructor</h4>
      </div>
      <%= render :partial => 'instructors/add_profile'%>
 

    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
